if(dwr==null)var dwr={};if(dwr.engine==null)dwr.engine={};if(DWREngine==null)var DWREngine=dwr.engine;dwr.engine.setErrorHandler=function(e){dwr.engine._errorHandler=e};dwr.engine.setWarningHandler=function(e){dwr.engine._warningHandler=e};dwr.engine.setTextHtmlHandler=function(e){dwr.engine._textHtmlHandler=e};dwr.engine.setTimeout=function(e){dwr.engine._timeout=e};dwr.engine.setPreHook=function(e){dwr.engine._preHook=e};dwr.engine.setPostHook=function(e){dwr.engine._postHook=e};dwr.engine.setHeaders=function(e){dwr.engine._headers=e};dwr.engine.setParameters=function(e){dwr.engine._parameters=e};dwr.engine.XMLHttpRequest=1;dwr.engine.IFrame=2;dwr.engine.ScriptTag=3;dwr.engine.setRpcType=function(e){if(e!=dwr.engine.XMLHttpRequest&&e!=dwr.engine.IFrame&&e!=dwr.engine.ScriptTag){dwr.engine._handleError(null,{name:"dwr.engine.invalidRpcType",message:"RpcType must be one of dwr.engine.XMLHttpRequest or dwr.engine.IFrame or dwr.engine.ScriptTag"});return}dwr.engine._rpcType=e};dwr.engine.setHttpMethod=function(e){if(e!="GET"&&e!="POST"){dwr.engine._handleError(null,{name:"dwr.engine.invalidHttpMethod",message:"Remoting method must be one of GET or POST"});return}dwr.engine._httpMethod=e};dwr.engine.setOrdered=function(e){dwr.engine._ordered=e};dwr.engine.setAsync=function(e){dwr.engine._async=e};dwr.engine.setActiveReverseAjax=function(e){if(e){if(dwr.engine._activeReverseAjax)return;dwr.engine._activeReverseAjax=true;dwr.engine._poll()}else{if(dwr.engine._activeReverseAjax&&dwr.engine._pollReq)dwr.engine._pollReq.abort();dwr.engine._activeReverseAjax=false}};dwr.engine.defaultErrorHandler=function(e,t){dwr.engine._debug("Error: "+t.name+", "+t.message,true);if(e==null||e=="")alert("A server error has occured.");else if(e.indexOf("0x80040111")!=-1)dwr.engine._debug(e);else alert(e)};dwr.engine.defaultWarningHandler=function(e,t){dwr.engine._debug(e)};dwr.engine.beginBatch=function(){if(dwr.engine._batch){dwr.engine._handleError(null,{name:"dwr.engine.batchBegun",message:"Batch already begun"});return}dwr.engine._batch=dwr.engine._createBatch()};dwr.engine.endBatch=function(e){var t=dwr.engine._batch;if(t==null){dwr.engine._handleError(null,{name:"dwr.engine.batchNotBegun",message:"No batch in progress"});return}dwr.engine._batch=null;if(t.map.callCount==0)return;if(e)dwr.engine._mergeBatch(t,e);if(dwr.engine._ordered&&dwr.engine._batchesLength!=0){dwr.engine._batchQueue[dwr.engine._batchQueue.length]=t}else{dwr.engine._sendData(t)}};dwr.engine.setPollMethod=function(e){dwr.engine.setPollType(e)};dwr.engine.setMethod=function(e){dwr.engine.setRpcType(e)};dwr.engine.setVerb=function(e){dwr.engine.setHttpMethod(e)};dwr.engine.setPollType=function(){dwr.engine._debug("Manually setting the Poll Type is not supported")};dwr.engine._origScriptSessionId="D3FCE6F1F0A58D34AC8FB2424424393A";dwr.engine._sessionCookieName="JSESSIONID";dwr.engine._allowGetForSafariButMakeForgeryEasier="false";dwr.engine._scriptTagProtection="throw 'allowScriptTagRemoting is false.';";dwr.engine._defaultPath="/dwr";dwr.engine._pollWithXhr="false";dwr.engine._scriptSessionId=null;dwr.engine._getScriptSessionId=function(){if(dwr.engine._scriptSessionId==null){dwr.engine._scriptSessionId=dwr.engine._origScriptSessionId+Math.floor(Math.random()*1e3)}return dwr.engine._scriptSessionId};dwr.engine._errorHandler=dwr.engine.defaultErrorHandler;dwr.engine._warningHandler=dwr.engine.defaultWarningHandler;dwr.engine._preHook=null;dwr.engine._postHook=null;dwr.engine._batches={};dwr.engine._batchesLength=0;dwr.engine._batchQueue=[];dwr.engine._rpcType=dwr.engine.XMLHttpRequest;dwr.engine._httpMethod="POST";dwr.engine._ordered=false;dwr.engine._async=true;dwr.engine._batch=null;dwr.engine._timeout=0;dwr.engine._DOMDocument=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","Msxml2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"];dwr.engine._XMLHTTP=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];dwr.engine._activeReverseAjax=false;dwr.engine._outstandingIFrames=[];dwr.engine._pollReq=null;dwr.engine._pollCometInterval=200;dwr.engine._pollRetries=0;dwr.engine._maxPollRetries=0;dwr.engine._textHtmlHandler=null;dwr.engine._headers=null;dwr.engine._parameters=null;dwr.engine._postSeperator="\n";dwr.engine._defaultInterceptor=function(e){return e};dwr.engine._urlRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._contentRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._replyRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._nextBatchId=0;dwr.engine._propnames=["rpcType","httpMethod","async","timeout","errorHandler","warningHandler","textHtmlHandler"];dwr.engine._partialResponseNo=0;dwr.engine._partialResponseYes=1;dwr.engine._partialResponseFlush=2;dwr.engine._unloading=false;dwr.engine._execute=function(e,t,n,r){var i=false;if(dwr.engine._batch==null){dwr.engine.beginBatch();i=true}var s=dwr.engine._batch;var o=[];for(var u=0;u<arguments.length-3;u++){o[u]=arguments[u+3]}if(s.path==null){s.path=e}else{if(s.path!=e){dwr.engine._handleError(s,{name:"dwr.engine.multipleServlets",message:"Can't batch requests to multiple DWR Servlets."});return}}var a;var f=o[o.length-1];if(typeof f=="function"||f==null)a={callback:o.pop()};else a=o.pop();dwr.engine._mergeBatch(s,a);s.handlers[s.map.callCount]={exceptionHandler:a.exceptionHandler,callback:a.callback};var l="c"+s.map.callCount+"-";s.map[l+"scriptName"]=t;s.map[l+"methodName"]=n;s.map[l+"id"]=s.map.callCount;for(u=0;u<o.length;u++){dwr.engine._serializeAll(s,[],o[u],l+"param"+u)}s.map.callCount++;if(i)dwr.engine.endBatch()};dwr.engine._poll=function(){if(!dwr.engine._activeReverseAjax)return;var e=dwr.engine._createBatch();e.map.id=0;e.map.callCount=1;e.isPoll=true;if(dwr.engine._pollWithXhr=="true"){e.rpcType=dwr.engine.XMLHttpRequest;e.map.partialResponse=dwr.engine._partialResponseNo}else{if(navigator.userAgent.indexOf("Gecko/")!=-1){e.rpcType=dwr.engine.XMLHttpRequest;e.map.partialResponse=dwr.engine._partialResponseYes}else{e.rpcType=dwr.engine.XMLHttpRequest;e.map.partialResponse=dwr.engine._partialResponseNo}}e.httpMethod="POST";e.async=true;e.timeout=0;e.path=dwr.engine._defaultPath;e.preHooks=[];e.postHooks=[];e.errorHandler=dwr.engine._pollErrorHandler;e.warningHandler=dwr.engine._pollErrorHandler;e.handlers[0]={callback:function(e){dwr.engine._pollRetries=0;setTimeout(dwr.engine._poll,e)}};dwr.engine._sendData(e);if(e.rpcType==dwr.engine.XMLHttpRequest&&e.map.partialResponse==dwr.engine._partialResponseYes){dwr.engine._checkCometPoll()}};dwr.engine._pollErrorHandler=function(e,t){dwr.engine._pollRetries++;dwr.engine._debug("Reverse Ajax poll failed (pollRetries="+dwr.engine._pollRetries+"): "+t.name+" : "+t.message);if(dwr.engine._pollRetries<dwr.engine._maxPollRetries){setTimeout(dwr.engine._poll,1e4)}else{dwr.engine._activeReverseAjax=false;dwr.engine._debug("Giving up.")}};dwr.engine._createBatch=function(){var e={map:{callCount:0,page:window.location.pathname+window.location.search,httpSessionId:dwr.engine._getJSessionId(),scriptSessionId:dwr.engine._getScriptSessionId()},charsProcessed:0,paramCount:0,parameters:{},headers:{},isPoll:false,handlers:{},preHooks:[],postHooks:[],rpcType:dwr.engine._rpcType,httpMethod:dwr.engine._httpMethod,async:dwr.engine._async,timeout:dwr.engine._timeout,errorHandler:dwr.engine._errorHandler,warningHandler:dwr.engine._warningHandler,textHtmlHandler:dwr.engine._textHtmlHandler};if(dwr.engine._preHook)e.preHooks.push(dwr.engine._preHook);if(dwr.engine._postHook)e.postHooks.push(dwr.engine._postHook);var t,n;if(dwr.engine._headers){for(t in dwr.engine._headers){n=dwr.engine._headers[t];if(typeof n!="function")e.headers[t]=n}}if(dwr.engine._parameters){for(t in dwr.engine._parameters){n=dwr.engine._parameters[t];if(typeof n!="function")e.parameters[t]=n}}return e};dwr.engine._mergeBatch=function(e,t){var n,r;for(var i=0;i<dwr.engine._propnames.length;i++){n=dwr.engine._propnames[i];if(t[n]!=null)e[n]=t[n]}if(t.preHook!=null)e.preHooks.unshift(t.preHook);if(t.postHook!=null)e.postHooks.push(t.postHook);if(t.headers){for(n in t.headers){r=t.headers[n];if(typeof r!="function")e.headers[n]=r}}if(t.parameters){for(n in t.parameters){r=t.parameters[n];if(typeof r!="function")e.map["p-"+n]=""+r}}};dwr.engine._getJSessionId=function(){var e=document.cookie.split(";");for(var t=0;t<e.length;t++){var n=e[t];while(n.charAt(0)==" ")n=n.substring(1,n.length);if(n.indexOf(dwr.engine._sessionCookieName+"=")==0){return n.substring(dwr.engine._sessionCookieName.length+1,n.length)}}return""};dwr.engine._checkCometPoll=function(){for(var e=0;e<dwr.engine._outstandingIFrames.length;e++){var t="";var n=dwr.engine._outstandingIFrames[e];try{t=dwr.engine._getTextFromCometIFrame(n)}catch(r){dwr.engine._handleWarning(n.batch,r)}if(t!="")dwr.engine._processCometResponse(t,n.batch)}if(dwr.engine._pollReq){var i=dwr.engine._pollReq;var t=i.responseText;if(t!=null)dwr.engine._processCometResponse(t,i.batch)}if(dwr.engine._outstandingIFrames.length>0||dwr.engine._pollReq){setTimeout(dwr.engine._checkCometPoll,dwr.engine._pollCometInterval)}};dwr.engine._getTextFromCometIFrame=function(e){var t=e.contentWindow.document.body;if(t==null)return"";var n=t.innerHTML;if(n.indexOf("<PRE>")==0||n.indexOf("<pre>")==0){n=n.substring(5,n.length-7)}return n};dwr.engine._processCometResponse=function(e,t){if(t.charsProcessed==e.length)return;if(e.length==0){t.charsProcessed=0;return}var n=e.indexOf("//#DWR-START#",t.charsProcessed);if(n==-1){t.charsProcessed=e.length;return}var r=e.lastIndexOf("//#DWR-END#");if(r==-1){return}if(e.charCodeAt(r+11)==13&&e.charCodeAt(r+12)==10){t.charsProcessed=r+13}else{t.charsProcessed=r+11}var i=e.substring(n+13,r);dwr.engine._receivedBatch=t;dwr.engine._eval(i);dwr.engine._receivedBatch=null};dwr.engine._sendData=function(e){e.map.batchId=dwr.engine._nextBatchId;dwr.engine._nextBatchId++;dwr.engine._batches[e.map.batchId]=e;dwr.engine._batchesLength++;e.completed=false;for(var t=0;t<e.preHooks.length;t++){e.preHooks[t]()}e.preHooks=null;if(e.timeout&&e.timeout!=0){e.timeoutId=setTimeout(function(){dwr.engine._abortRequest(e)},e.timeout)}if(e.rpcType==dwr.engine.XMLHttpRequest){if(window.XMLHttpRequest){e.req=new XMLHttpRequest}else if(window.ActiveXObject&&!(navigator.userAgent.indexOf("Mac")>=0&&navigator.userAgent.indexOf("MSIE")>=0)){e.req=dwr.engine._newActiveXObject(dwr.engine._XMLHTTP)}}var n,r;if(e.req){if(e.async){e.req.onreadystatechange=function(){if(typeof dwr!="undefined")dwr.engine._stateChange(e)}}if(e.isPoll){dwr.engine._pollReq=e.req;if(!(document.all&&!window.opera))e.req.batch=e}var i=navigator.userAgent.indexOf("Safari/");if(i>=0){var s=navigator.userAgent.substring(i+7);if(parseInt(s,10)<400){if(dwr.engine._allowGetForSafariButMakeForgeryEasier=="true")e.httpMethod="GET";else dwr.engine._handleWarning(e,{name:"dwr.engine.oldSafari",message:"Safari GET support disabled. See getahead.org/dwr/server/servlet and allowGetForSafariButMakeForgeryEasier."})}}e.mode=e.isPoll?dwr.engine._ModePlainPoll:dwr.engine._ModePlainCall;r=dwr.engine._constructRequest(e);try{e.req.open(e.httpMethod,r.url,e.async);try{for(n in e.headers){var o=e.headers[n];if(typeof o=="string")e.req.setRequestHeader(n,o)}if(!e.headers["Content-Type"])e.req.setRequestHeader("Content-Type","text/plain")}catch(u){dwr.engine._handleWarning(e,u)}e.req.send(r.body);if(!e.async)dwr.engine._stateChange(e)}catch(u){dwr.engine._handleError(e,u)}}else if(e.rpcType!=dwr.engine.ScriptTag){var a=e.isPoll?"dwr-if-poll-"+e.map.batchId:"dwr-if-"+e.map.batchId;e.div=document.createElement("div");document.body.appendChild(e.div);e.div.innerHTML="<iframe src='javascript:void(0)' frameborder='0' style='width:0px;height:0px;border:0;' id='"+a+"' name='"+a+"' onload='dwr.engine._iframeLoadingComplete ("+e.map.batchId+");'></iframe>";e.document=document;e.iframe=e.document.getElementById(a);e.iframe.batch=e;e.mode=e.isPoll?dwr.engine._ModeHtmlPoll:dwr.engine._ModeHtmlCall;if(e.isPoll)dwr.engine._outstandingIFrames.push(e.iframe);r=dwr.engine._constructRequest(e);if(e.httpMethod=="GET"){e.iframe.setAttribute("src",r.url)}else{e.form=e.document.createElement("form");e.form.setAttribute("id","dwr-form");e.form.setAttribute("action",r.url);e.form.setAttribute("style","display:none;");e.form.setAttribute("target",a);e.form.target=a;e.form.setAttribute("method",e.httpMethod);for(n in e.map){var o=e.map[n];if(typeof o!="function"){var f=e.document.createElement("input");f.setAttribute("type","hidden");f.setAttribute("name",n);f.setAttribute("value",o);e.form.appendChild(f)}}e.document.body.appendChild(e.form);e.form.submit()}}else{e.httpMethod="GET";e.mode=e.isPoll?dwr.engine._ModePlainPoll:dwr.engine._ModePlainCall;r=dwr.engine._constructRequest(e);e.script=document.createElement("script");e.script.id="dwr-st-"+e.map["c0-id"];e.script.src=r.url;document.body.appendChild(e.script)}};dwr.engine._ModePlainCall="/call/plaincall/";dwr.engine._ModeHtmlCall="/call/htmlcall/";dwr.engine._ModePlainPoll="/call/plainpoll/";dwr.engine._ModeHtmlPoll="/call/htmlpoll/";dwr.engine._constructRequest=function(e){var t={url:e.path+e.mode,body:null};if(e.isPoll==true){t.url+="ReverseAjax.dwr"}else if(e.map.callCount==1){t.url+=e.map["c0-scriptName"]+"."+e.map["c0-methodName"]+".dwr"}else{t.url+="Multiple."+e.map.callCount+".dwr"}var n=location.href.match(/jsessionid=([^?]+)/);if(n!=null){t.url+=";jsessionid="+n[1]}var r;if(e.httpMethod=="GET"){e.map.callCount=""+e.map.callCount;t.url+="?";for(r in e.map){if(typeof e.map[r]!="function"){t.url+=encodeURIComponent(r)+"="+encodeURIComponent(e.map[r])+"&"}}t.url=t.url.substring(0,t.url.length-1)}else{t.body="";if(document.all&&!window.opera){var i=[];for(r in e.map){if(typeof e.map[r]!="function"){i.push(r+"="+e.map[r]+dwr.engine._postSeperator)}}t.body=i.join("")}else{for(r in e.map){if(typeof e.map[r]!="function"){t.body+=r+"="+e.map[r]+dwr.engine._postSeperator}}}t.body=dwr.engine._contentRewriteHandler(t.body)}t.url=dwr.engine._urlRewriteHandler(t.url);return t};dwr.engine._stateChange=function(e){var t;if(e.completed){dwr.engine._debug("Error: _stateChange() with batch.completed");return}var n=e.req;try{if(n.readyState!=4)return}catch(r){dwr.engine._handleWarning(e,r);dwr.engine._clearUp(e);return}if(dwr.engine._unloading){dwr.engine._debug("Ignoring reply from server as page is unloading.");return}try{var i=n.responseText;i=dwr.engine._replyRewriteHandler(i);var s=n.status;if(i==null||i==""){dwr.engine._handleWarning(e,{name:"dwr.engine.missingData",message:"No data received from server"})}else if(s!=200){dwr.engine._handleError(e,{name:"dwr.engine.http."+s,message:n.statusText})}else{var o=n.getResponseHeader("Content-Type");if(!o.match(/^text\/plain/)&&!o.match(/^text\/javascript/)){if(o.match(/^text\/html/)&&typeof e.textHtmlHandler=="function"){e.textHtmlHandler({status:s,responseText:i,contentType:o})}else{dwr.engine._handleWarning(e,{name:"dwr.engine.invalidMimeType",message:"Invalid content type: '"+o+"'"})}}else{if(e.isPoll&&e.map.partialResponse==dwr.engine._partialResponseYes){dwr.engine._processCometResponse(i,e)}else{if(i.search("//#DWR")==-1){dwr.engine._handleWarning(e,{name:"dwr.engine.invalidReply",message:"Invalid reply from server"})}else{t=i}}}}}catch(r){dwr.engine._handleWarning(e,r)}dwr.engine._callPostHooks(e);dwr.engine._receivedBatch=e;if(t!=null)t=t.replace(dwr.engine._scriptTagProtection,"");dwr.engine._eval(t);dwr.engine._receivedBatch=null;dwr.engine._validateBatch(e);if(!e.completed)dwr.engine._clearUp(e)};dwr.engine._validateBatch=function(e){if(!e.completed){for(var t=0;t<e.map.callCount;t++){if(e.handlers[t]!=null){dwr.engine._handleWarning(e,{name:"dwr.engine.incompleteReply",message:"Incomplete reply from server"});break}}}};dwr.engine._iframeLoadingComplete=function(e){var t=dwr.engine._batches[e];if(t)dwr.engine._validateBatch(t)};dwr.engine._remoteHandleCallback=function(e,t,n){var r=dwr.engine._batches[e];if(r==null){dwr.engine._debug("Warning: batch == null in remoteHandleCallback for batchId="+e,true);return}try{var i=r.handlers[t];r.handlers[t]=null;if(!i){dwr.engine._debug("Warning: Missing handlers. callId="+t,true)}else if(typeof i.callback=="function")i.callback(n)}catch(s){dwr.engine._handleError(r,s)}};dwr.engine._remoteHandleException=function(e,t,n){var r=dwr.engine._batches[e];if(r==null){dwr.engine._debug("Warning: null batch in remoteHandleException",true);return}var i=r.handlers[t];r.handlers[t]=null;if(i==null){dwr.engine._debug("Warning: null handlers in remoteHandleException",true);return}if(n.message==undefined)n.message="";if(typeof i.exceptionHandler=="function")i.exceptionHandler(n.message,n);else if(typeof r.errorHandler=="function")r.errorHandler(n.message,n)};dwr.engine._remoteHandleBatchException=function(e,t){var n=dwr.engine._receivedBatch==null&&t!=null;if(n){dwr.engine._receivedBatch=dwr.engine._batches[t]}if(e.message==undefined)e.message="";dwr.engine._handleError(dwr.engine._receivedBatch,e);if(n){dwr.engine._receivedBatch=null;dwr.engine._clearUp(dwr.engine._batches[t])}};dwr.engine._remotePollCometDisabled=function(e,t){dwr.engine.setActiveReverseAjax(false);var n=dwr.engine._receivedBatch==null&&t!=null;if(n){dwr.engine._receivedBatch=dwr.engine._batches[t]}if(e.message==undefined)e.message="";dwr.engine._handleError(dwr.engine._receivedBatch,e);if(n){dwr.engine._receivedBatch=null;dwr.engine._clearUp(dwr.engine._batches[t])}};dwr.engine._remoteBeginIFrameResponse=function(e,t){if(e!=null)dwr.engine._receivedBatch=e.batch;dwr.engine._callPostHooks(dwr.engine._receivedBatch)};dwr.engine._remoteEndIFrameResponse=function(e){dwr.engine._clearUp(dwr.engine._receivedBatch);dwr.engine._receivedBatch=null};dwr.engine._eval=function(script){if(script==null)return null;if(script==""){dwr.engine._debug("Warning: blank script",true);return null}return eval(script)};dwr.engine._abortRequest=function(e){if(e&&!e.completed){dwr.engine._clearUp(e);if(e.req)e.req.abort();dwr.engine._handleError(e,{name:"dwr.engine.timeout",message:"Timeout"})}};dwr.engine._callPostHooks=function(e){if(e.postHooks){for(var t=0;t<e.postHooks.length;t++){e.postHooks[t]()}e.postHooks=null}};dwr.engine._clearUp=function(e){if(!e){dwr.engine._debug("Warning: null batch in dwr.engine._clearUp()",true);return}if(e.completed){dwr.engine._debug("Warning: Double complete",true);return}if(e.div)e.div.parentNode.removeChild(e.div);if(e.iframe){for(var t=0;t<dwr.engine._outstandingIFrames.length;t++){if(dwr.engine._outstandingIFrames[t]==e.iframe){dwr.engine._outstandingIFrames.splice(t,1)}}e.iframe.parentNode.removeChild(e.iframe)}if(e.form)e.form.parentNode.removeChild(e.form);if(e.req){if(e.req==dwr.engine._pollReq)dwr.engine._pollReq=null;delete e.req}if(e.timeoutId){clearTimeout(e.timeoutId);delete e.timeoutId}if(e.map&&(e.map.batchId||e.map.batchId==0)){delete dwr.engine._batches[e.map.batchId];dwr.engine._batchesLength--}e.completed=true;if(dwr.engine._batchQueue.length!=0){var n=dwr.engine._batchQueue.shift();dwr.engine._sendData(n)}};dwr.engine._unloader=function(){dwr.engine._unloading=true;dwr.engine._batchQueue.length=0;for(var e in dwr.engine._batches){var t=dwr.engine._batches[e];if(t&&t.map){if(t.req){t.req.abort()}dwr.engine._clearUp(t)}}};if(window.addEventListener)window.addEventListener("unload",dwr.engine._unloader,false);else if(window.attachEvent)window.attachEvent("onunload",dwr.engine._unloader);dwr.engine._handleError=function(e,t){if(typeof t=="string")t={name:"unknown",message:t};if(t.message==null)t.message="";if(t.name==null)t.name="unknown";if(e&&typeof e.errorHandler=="function")e.errorHandler(t.message,t);else if(dwr.engine._errorHandler)dwr.engine._errorHandler(t.message,t);if(e)dwr.engine._clearUp(e)};dwr.engine._handleWarning=function(e,t){if(typeof t=="string")t={name:"unknown",message:t};if(t.message==null)t.message="";if(t.name==null)t.name="unknown";if(e&&typeof e.warningHandler=="function")e.warningHandler(t.message,t);else if(dwr.engine._warningHandler)dwr.engine._warningHandler(t.message,t);if(e)dwr.engine._clearUp(e)};dwr.engine._serializeAll=function(e,t,n,r){if(n==null){e.map[r]="null:null";return}switch(typeof n){case"boolean":e.map[r]="boolean:"+n;break;case"number":e.map[r]="number:"+n;break;case"string":e.map[r]="string:"+encodeURIComponent(n);break;case"object":if(n instanceof String)e.map[r]="String:"+encodeURIComponent(n);else if(n instanceof Boolean)e.map[r]="Boolean:"+n;else if(n instanceof Number)e.map[r]="Number:"+n;else if(n instanceof Date)e.map[r]="Date:"+n.getTime();else if(n&&n.join)e.map[r]=dwr.engine._serializeArray(e,t,n,r);else e.map[r]=dwr.engine._serializeObject(e,t,n,r);break;case"function":break;default:dwr.engine._handleWarning(null,{name:"dwr.engine.unexpectedType",message:"Unexpected type: "+typeof n+", attempting default converter."});e.map[r]="default:"+n;break}};dwr.engine._lookup=function(e,t,n){var r;for(var i=0;i<e.length;i++){if(e[i].data==t){r=e[i];break}}if(r)return"reference:"+r.name;e.push({data:t,name:n});return null};dwr.engine._serializeObject=function(e,t,n,r){var i=dwr.engine._lookup(t,n,r);if(i)return i;if(n.nodeName&&n.nodeType){return dwr.engine._serializeXml(e,t,n,r)}var s="Object_"+dwr.engine._getObjectClassName(n)+":{";var o;for(o in n){if(typeof n[o]!="function"){e.paramCount++;var u="c"+dwr.engine._batch.map.callCount+"-e"+e.paramCount;dwr.engine._serializeAll(e,t,n[o],u);s+=encodeURIComponent(o)+":reference:"+u+", "}}if(s.substring(s.length-2)==", "){s=s.substring(0,s.length-2)}s+="}";return s};dwr.engine._errorClasses={Error:Error,EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError};dwr.engine._getObjectClassName=function(e){if(e&&e.constructor&&e.constructor.toString){var t=e.constructor.toString();var n=t.match(/function\s+(\w+)/);if(n&&n.length==2){return n[1]}}if(e&&e.constructor){for(var r in dwr.engine._errorClasses){if(e.constructor==dwr.engine._errorClasses[r])return r}}if(e){var t=Object.prototype.toString.call(e);var n=t.match(/\[object\s+(\w+)/);if(n&&n.length==2){return n[1]}}return"Object"};dwr.engine._serializeXml=function(e,t,n,r){var i=dwr.engine._lookup(t,n,r);if(i)return i;var s;if(window.XMLSerializer)s=(new XMLSerializer).serializeToString(n);else if(n.toXml)s=n.toXml;else s=n.innerHTML;return"XML:"+encodeURIComponent(s)};dwr.engine._serializeArray=function(e,t,n,r){var i=dwr.engine._lookup(t,n,r);if(i)return i;if(document.all&&!window.opera){var s=["Array:["];for(var o=0;o<n.length;o++){if(o!=0)s.push(",");e.paramCount++;var u="c"+dwr.engine._batch.map.callCount+"-e"+e.paramCount;dwr.engine._serializeAll(e,t,n[o],u);s.push("reference:");s.push(u)}s.push("]");a=s.join("")}else{var a="Array:[";for(var o=0;o<n.length;o++){if(o!=0)a+=",";e.paramCount++;var u="c"+dwr.engine._batch.map.callCount+"-e"+e.paramCount;dwr.engine._serializeAll(e,t,n[o],u);a+="reference:";a+=u}a+="]"}return a};dwr.engine._unserializeDocument=function(e){var t;if(window.DOMParser){var n=new DOMParser;t=n.parseFromString(e,"text/xml");if(!t.documentElement||t.documentElement.tagName=="parsererror"){var r=t.documentElement.firstChild.data;r+="\n"+t.documentElement.firstChild.nextSibling.firstChild.data;throw r}return t}else if(window.ActiveXObject){t=dwr.engine._newActiveXObject(dwr.engine._DOMDocument);t.loadXML(e);return t}else{var i=document.createElement("div");i.innerHTML=e;return i}};dwr.engine._newActiveXObject=function(e){var t;for(var n=0;n<e.length;n++){try{t=new ActiveXObject(e[n]);break}catch(r){}}return t};dwr.engine._debug=function(e,t){var n=false;try{if(window.console){if(t&&window.console.trace)window.console.trace();window.console.log(e);n=true}else if(window.opera&&window.opera.postError){window.opera.postError(e);n=true}}catch(r){}if(!n){var i=document.getElementById("dwr-debug");if(i){var s=e+"<br/>"+i.innerHTML;if(s.length>2048)s=s.substring(0,2048);i.innerHTML=s}}}